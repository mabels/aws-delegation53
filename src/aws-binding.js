"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getHostedZones = exports.waitFor = exports.updateRecord = exports.getZoneRecords = exports.assumeRole = void 0;
const AWS = require("aws-sdk");
async function assumeRole(profile, assumeRole, session = `assumedRole_${assumeRole.replace(/[^A-Za-z0-9]/g, "_")}`) {
    return new Promise((rs, rj) => {
        let sts = new AWS.STS({
            apiVersion: "2011-06-15",
            ...profile,
        });
        sts.assumeRole({
            RoleArn: assumeRole,
            RoleSessionName: "router",
        }, (err, data) => {
            if (err) {
                rj(err);
            }
            else {
                rs(data);
            }
        });
    });
}
exports.assumeRole = assumeRole;
async function getZoneRecords(route53, hostzone) {
    return new Promise((rs, rj) => {
        const ret = [];
        function fetchAll(recordName) {
            const params = {
                HostedZoneId: hostzone.Id,
                // MaxItems: "16",
                // StartRecordIdentifier: '*',
                StartRecordName: recordName,
                StartRecordType: "NS",
            };
            route53.listResourceRecordSets(params, (err, data) => {
                if (err) {
                    rj(err);
                    return;
                }
                ret.push(...data.ResourceRecordSets);
                if (data.NextRecordName) {
                    fetchAll(data.NextRecordName);
                }
                else {
                    rs(ret);
                }
            });
        }
        fetchAll(hostzone.Name);
    });
}
exports.getZoneRecords = getZoneRecords;
async function updateRecord(route53, recordSet, zoneId, downRole, action = "UPSERT") {
    const params = {
        ChangeBatch: {
            Changes: [
                {
                    Action: action,
                    ResourceRecordSet: recordSet,
                },
            ],
            Comment: `Set the delegation for ${downRole}`,
        },
        HostedZoneId: zoneId,
    };
    return new Promise((rs, rj) => {
        route53.changeResourceRecordSets(params, function (err, data) {
            if (err) {
                rj(err);
            }
            else {
                rs(data);
            }
        });
    });
}
exports.updateRecord = updateRecord;
async function waitFor(route53, data) {
    const params = {
        Id: data.ChangeInfo.Id,
    };
    return new Promise((rs, rj) => {
        route53.waitFor("resourceRecordSetsChanged", params, (err, data) => {
            if (err) {
                rj(err);
            }
            else {
                rs(data);
            }
        });
    });
}
exports.waitFor = waitFor;
async function getHostedZones(route53) {
    const result = [];
    return new Promise(async (rs, rj) => {
        function listHostedZones(req) {
            route53.listHostedZones(req, async (err, hostzones) => {
                if (err) {
                    rj(err);
                    return;
                }
                const infos = await Promise.all(hostzones.HostedZones.map(async (hz) => {
                    return {
                        hostZone: hz,
                        recordSet: await getZoneRecords(route53, hz),
                    };
                }));
                result.push(...infos);
                if (hostzones.NextMarker && hostzones.IsTruncated) {
                    listHostedZones({
                        Marker: hostzones.NextMarker,
                    });
                }
                else {
                    rs(result);
                }
            });
        }
        listHostedZones({});
    });
}
exports.getHostedZones = getHostedZones;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXdzLWJpbmRpbmcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJhd3MtYmluZGluZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFBQSwrQkFBK0I7QUFHeEIsS0FBSyxVQUFVLFVBQVUsQ0FDOUIsT0FBb0MsRUFDcEMsVUFBa0IsRUFDbEIsT0FBTyxHQUFHLGVBQWUsVUFBVSxDQUFDLE9BQU8sQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDLEVBQUU7SUFFbkUsT0FBTyxJQUFJLE9BQU8sQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRTtRQUM1QixJQUFJLEdBQUcsR0FBRyxJQUFJLEdBQUcsQ0FBQyxHQUFHLENBQUM7WUFDcEIsVUFBVSxFQUFFLFlBQVk7WUFDeEIsR0FBRyxPQUFPO1NBQ1gsQ0FBQyxDQUFDO1FBQ0gsR0FBRyxDQUFDLFVBQVUsQ0FDWjtZQUNFLE9BQU8sRUFBRSxVQUFVO1lBQ25CLGVBQWUsRUFBRSxRQUFRO1NBQzFCLEVBQ0QsQ0FBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEVBQUU7WUFDWixJQUFJLEdBQUcsRUFBRTtnQkFDUCxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7YUFDVDtpQkFBTTtnQkFDTCxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDVjtRQUNILENBQUMsQ0FDRixDQUFDO0lBQ0osQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBeEJELGdDQXdCQztBQUVNLEtBQUssVUFBVSxjQUFjLENBQ2xDLE9BQW9CLEVBQ3BCLFFBQWdDO0lBRWhDLE9BQU8sSUFBSSxPQUFPLENBQWtDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxFQUFFO1FBQzdELE1BQU0sR0FBRyxHQUFvQyxFQUFFLENBQUM7UUFDaEQsU0FBUyxRQUFRLENBQUMsVUFBa0I7WUFDbEMsTUFBTSxNQUFNLEdBQUc7Z0JBQ2IsWUFBWSxFQUFFLFFBQVEsQ0FBQyxFQUFFO2dCQUN6QixrQkFBa0I7Z0JBQ2xCLDhCQUE4QjtnQkFDOUIs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RyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsRUFBRTtvQkFDckMsT0FBTzt3QkFDTCxRQUFRLEVBQUUsRUFBRTt3QkFDWixTQUFTLEVBQUUsTUFBTSxjQUFjLENBQUMsT0FBTyxFQUFFLEVBQUUsQ0FBQztxQkFDN0MsQ0FBQztnQkFDSixDQUFDLENBQUMsQ0FDSCxDQUFDO2dCQUNGLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxLQUFLLENBQUMsQ0FBQztnQkFDdEIsSUFBSSxTQUFTLENBQUMsVUFBVSxJQUFJLFNBQVMsQ0FBQyxXQUFXLEVBQUU7b0JBQ2pELGVBQWUsQ0FBQzt3QkFDZCxNQUFNLEVBQUUsU0FBUyxDQUFDLFVBQVU7cUJBQzdCLENBQUMsQ0FBQztpQkFDSjtxQkFBTTtvQkFDTCxFQUFFLENBQUMsTUFBTSxDQUFDLENBQUM7aUJBQ1o7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDdEIsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDO0FBL0JELHdDQStCQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIEFXUyBmcm9tIFwiYXdzLXNka1wiO1xuaW1wb3J0IHsgUm91dGU1MyB9IGZyb20gXCJhd3Mtc2RrXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhc3N1bWVSb2xlKFxuICBwcm9maWxlOiBBV1MuU1RTLkNsaWVudENvbmZpZ3VyYXRpb24sXG4gIGFzc3VtZVJvbGU6IHN0cmluZyxcbiAgc2Vzc2lvbiA9IGBhc3N1bWVkUm9sZV8ke2Fzc3VtZVJvbGUucmVwbGFjZSgvW15BLVphLXowLTldL2csIFwiX1wiKX1gXG4pOiBQcm9taXNlPEFXUy5TVFMuQXNzdW1lUm9sZVJlc3BvbnNlPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XG4gICAgbGV0IHN0cyA9IG5ldyBBV1MuU1RTKHtcbiAgICAgIGFwaVZlcnNpb246IFwiMjAxMS0wNi0xNVwiLFxuICAgICAgLi4ucHJvZmlsZSxcbiAgICB9KTtcbiAgICBzdHMuYXNzdW1lUm9sZShcbiAgICAgIHtcbiAgICAgICAgUm9sZUFybjogYXNzdW1lUm9sZSxcbiAgICAgICAgUm9sZVNlc3Npb25OYW1lOiBcInJvdXRlclwiLFxuICAgICAgfSxcbiAgICAgIChlcnIsIGRhdGEpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJqKGVycik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcnMoZGF0YSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICApO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFpvbmVSZWNvcmRzKFxuICByb3V0ZTUzOiBBV1MuUm91dGU1MyxcbiAgaG9zdHpvbmU6IEFXUy5Sb3V0ZTUzLkhvc3RlZFpvbmVcbikge1xuICByZXR1cm4gbmV3IFByb21pc2U8QVdTLlJvdXRlNTMuUmVzb3VyY2VSZWNvcmRTZXRbXT4oKHJzLCByaikgPT4ge1xuICAgIGNvbnN0IHJldDogQVdTLlJvdXRlNTMuUmVzb3VyY2VSZWNvcmRTZXRbXSA9IFtdO1xuICAgIGZ1bmN0aW9uIGZldGNoQWxsKHJlY29yZE5hbWU6IHN0cmluZykge1xuICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICBIb3N0ZWRab25lSWQ6IGhvc3R6b25lLklkLCAvLyByZXF1aXJlZFxuICAgICAgICAvLyBNYXhJdGVtczogXCIxNlwiLFxuICAgICAgICAvLyBTdGFydFJlY29yZElkZW50aWZpZXI6ICcqJyxcbiAgICAgICAgU3RhcnRSZWNvcmROYW1lOiByZWNvcmROYW1lLFxuICAgICAgICBTdGFydFJlY29yZFR5cGU6IFwiTlNcIixcbiAgICAgIH07XG4gICAgICByb3V0ZTUzLmxpc3RSZXNvdXJjZVJlY29yZFNldHMocGFyYW1zLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICByaihlcnIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICByZXQucHVzaCguLi5kYXRhLlJlc291cmNlUmVjb3JkU2V0cyk7XG4gICAgICAgIGlmIChkYXRhLk5leHRSZWNvcmROYW1lKSB7XG4gICAgICAgICAgZmV0Y2hBbGwoZGF0YS5OZXh0UmVjb3JkTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcnMocmV0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGZldGNoQWxsKGhvc3R6b25lLk5hbWUpO1xuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVJlY29yZChcbiAgcm91dGU1MzogQVdTLlJvdXRlNTMsXG4gIHJlY29yZFNldDogUm91dGU1My5SZXNvdXJjZVJlY29yZFNldCxcbiAgem9uZUlkOiBzdHJpbmcsXG4gIGRvd25Sb2xlOiBzdHJpbmcsXG4gIGFjdGlvbiA9IFwiVVBTRVJUXCJcbik6IFByb21pc2U8Um91dGU1My5DaGFuZ2VSZXNvdXJjZVJlY29yZFNldHNSZXNwb25zZT4ge1xuICBjb25zdCBwYXJhbXMgPSB7XG4gICAgQ2hhbmdlQmF0Y2g6IHtcbiAgICAgIENoYW5nZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIEFjdGlvbjogYWN0aW9uLFxuICAgICAgICAgIFJlc291cmNlUmVjb3JkU2V0OiByZWNvcmRTZXQsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgQ29tbWVudDogYFNldCB0aGUgZGVsZWdhdGlvbiBmb3IgJHtkb3duUm9sZX1gLFxuICAgIH0sXG4gICAgSG9zdGVkWm9uZUlkOiB6b25lSWQsXG4gIH07XG4gIHJldHVybiBuZXcgUHJvbWlzZSgocnMsIHJqKSA9PiB7XG4gICAgcm91dGU1My5jaGFuZ2VSZXNvdXJjZVJlY29yZFNldHMocGFyYW1zLCBmdW5jdGlvbiAoZXJyLCBkYXRhKSB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJqKGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBycyhkYXRhKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB3YWl0Rm9yKFxuICByb3V0ZTUzOiBBV1MuUm91dGU1MyxcbiAgZGF0YTogUm91dGU1My5DaGFuZ2VSZXNvdXJjZVJlY29yZFNldHNSZXNwb25zZVxuKTogUHJvbWlzZTxSb3V0ZTUzLkdldENoYW5nZVJlc3BvbnNlPiB7XG4gIGNvbnN0IHBhcmFtcyA9IHtcbiAgICBJZDogZGF0YS5DaGFuZ2VJbmZvLklkLFxuICB9O1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJzLCByaikgPT4ge1xuICAgIHJvdXRlNTMud2FpdEZvcihcInJlc291cmNlUmVjb3JkU2V0c0NoYW5nZWRcIiwgcGFyYW1zLCAoZXJyLCBkYXRhKSA9PiB7XG4gICAgICBpZiAoZXJyKSB7XG4gICAgICAgIHJqKGVycik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBycyhkYXRhKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSG9zdGVkWm9uZUluZm8ge1xuICBob3N0Wm9uZTogQVdTLlJvdXRlNTMuSG9zdGVkWm9uZTtcbiAgcmVjb3JkU2V0OiBSb3V0ZTUzLlJlc291cmNlUmVjb3JkU2V0W107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUm91dGU1M0FjY291bnQge1xuICByZWFkb25seSByb2xlQXJuOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNjb3VudHNIb3N0ZWRab25lcyB7XG4gIGFjY291bnQ6IFJvdXRlNTNBY2NvdW50O1xuICByb3V0ZTUzOiBBV1MuUm91dGU1MztcbiAgem9uZXM6IEhvc3RlZFpvbmVJbmZvW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQWNjb3VudHNIb3N0ZWRab25lIHtcbiAgbmFtZTogc3RyaW5nO1xuICBhY2NvdW50c0hvc3RlZFpvbmVzOiBBY2NvdW50c0hvc3RlZFpvbmVzO1xuICB6b25lOiBIb3N0ZWRab25lSW5mbztcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEhvc3RlZFpvbmVzKFxuICByb3V0ZTUzOiBBV1MuUm91dGU1M1xuKTogUHJvbWlzZTxIb3N0ZWRab25lSW5mb1tdPiB7XG4gIGNvbnN0IHJlc3VsdDogSG9zdGVkWm9uZUluZm9bXSA9IFtdO1xuICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJzLCByaikgPT4ge1xuICAgIGZ1bmN0aW9uIGxpc3RIb3N0ZWRab25lcyhyZXE6IFJvdXRlNTMuTGlzdEhvc3RlZFpvbmVzUmVxdWVzdCkge1xuICAgICAgcm91dGU1My5saXN0SG9zdGVkWm9uZXMocmVxLCBhc3luYyAoZXJyLCBob3N0em9uZXMpID0+IHtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIHJqKGVycik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGluZm9zID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICAgICAgaG9zdHpvbmVzLkhvc3RlZFpvbmVzLm1hcChhc3luYyAoaHopID0+IHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGhvc3Rab25lOiBoeixcbiAgICAgICAgICAgICAgcmVjb3JkU2V0OiBhd2FpdCBnZXRab25lUmVjb3Jkcyhyb3V0ZTUzLCBoeiksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgICk7XG4gICAgICAgIHJlc3VsdC5wdXNoKC4uLmluZm9zKTtcbiAgICAgICAgaWYgKGhvc3R6b25lcy5OZXh0TWFya2VyICYmIGhvc3R6b25lcy5Jc1RydW5jYXRlZCkge1xuICAgICAgICAgIGxpc3RIb3N0ZWRab25lcyh7XG4gICAgICAgICAgICBNYXJrZXI6IGhvc3R6b25lcy5OZXh0TWFya2VyLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJzKHJlc3VsdCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBsaXN0SG9zdGVkWm9uZXMoe30pO1xuICB9KTtcbn1cbiJdfQ==